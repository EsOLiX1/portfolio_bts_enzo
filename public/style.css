/* =============================================================
   THEME SOMBRE - PALETTE ARGENTÉE
   Palette principale :
     --accent: #BFC7CB (argent léger)
     --accent-hot: #E6E9EB (argent clair)
     --accent-neon: #F5F7F8 (blanc argenté)
   ============================================================= */

/* Reset & variables */
:root {
  --color-bg: #0d0d13;
  --color-bg-alt: #16161f;
  --color-surface: #1b1b27;
  --color-surface-alt: #232330;
  --color-border: #2c2c3a;
  --color-text: #e8e8f0;
  --color-text-soft: #b8b8c6;
  --color-heading: #ffffff;
  --accent: #BFC7CB;
  --accent-hot: #E6E9EB;
  --accent-neon: #F5F7F8;
  --gradient-accent: linear-gradient(135deg,var(--accent) 0%, var(--accent-hot) 50%, var(--accent-neon) 100%);
  --shadow-xs: 0 1px 2px rgba(0,0,0,0.5);
  --shadow-sm: 0 4px 8px -2px rgba(0,0,0,0.5), 0 0 0 1px rgba(255,255,255,0.03) inset;
  --shadow-md: 0 8px 24px -6px rgba(0,0,0,0.55), 0 0 0 1px rgba(255,255,255,0.04) inset;
  --radius-xs: 4px;
  --radius-sm: 6px;
  --radius-md: 10px;
  --radius-lg: 16px;
  --transition-fast: .18s cubic-bezier(.4,.0,.2,1);
  --transition-slow: .45s cubic-bezier(.4,0,.2,1);
  --focus-ring: 0 0 0 3px rgba(191,199,203,0.24), 0 0 0 6px rgba(230,233,235,0.10);
  --font-stack: 'Inter', 'Segoe UI', Arial, sans-serif;
  --line-height: 1.55;
}

@media (prefers-reduced-motion: reduce) {
  :root {
    --transition-fast: 0s;
    --transition-slow: 0s;
  }
  * { animation-duration: 0.001ms !important; animation-iteration-count: 1 !important; transition: none !important; }
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
  font-family: var(--font-stack);
}

body {
  background: radial-gradient(circle at 30% 20%, #141428, #0a0a11 60%);
  color: var(--color-text);
  line-height: var(--line-height);
  -webkit-font-smoothing: antialiased;
  min-height: 100vh;
  background-attachment: fixed;
  position: relative;
  overflow-x: hidden;
}

/* Lueur animée subtile en fond */
body::before, body::after {
  content: '';
  position: fixed;
  width: 600px;
  height: 600px;
  /* subtle silver glow */
    background: radial-gradient(circle at center, rgba(191,199,203,0.10), transparent 70%);
  filter: blur(120px) saturate(120%);
  z-index: -2;
  animation: floatGlow 18s linear infinite;
  opacity: .55;
}
body::before { top: -150px; left: -150px; }
body::after { bottom: -180px; right: -120px; animation-direction: reverse; }

@keyframes floatGlow {
  0% { transform: translate3d(0,0,0) scale(1); }
  50% { transform: translate3d(60px,40px,0) scale(1.1); }
  100% { transform: translate3d(0,0,0) scale(1); }
}

/* Top banner */
.top-banner {
  background: linear-gradient(90deg, rgba(191,199,203,0.12), rgba(230,233,235,0.09) 40%, rgba(191,199,203,0.12));
  text-align: center;
  padding: 20px 0;
  font-size: 2rem;
  font-weight: 700;
  letter-spacing: .5px;
  backdrop-filter: blur(6px);
  position: relative;
  border-bottom: 1px solid rgba(255,255,255,0.06);
}
.top-banner::after {
  content: '';
  position: absolute; inset: 0;
  background: linear-gradient(120deg, transparent 0 30%, rgba(255,255,255,0.07) 45%, transparent 60% 100%);
  mix-blend-mode: overlay;
  animation: sheen 6s linear infinite;
  pointer-events: none;
}
@keyframes sheen { 0% { background-position: -200%; } 100% { background-position: 200%; } }

.top-banner a {
  color: var(--color-heading);
  text-decoration: none;
  background: linear-gradient(90deg,var(--accent),var(--accent-neon));
  background-clip: text;
  -webkit-background-clip: text;
  color: transparent;
  filter: drop-shadow(0 2px 4px rgba(191,199,203,0.30));
  transition: filter var(--transition-fast), text-shadow var(--transition-fast);
}
.top-banner a:hover { filter: drop-shadow(0 4px 10px rgba(191,199,203,0.45)); }

/* Header + nav */
header {
  background: rgba(21,21,35,0.72);
  color: var(--color-text);
  padding: 20px 0;
  display: flex;
  justify-content: center;
  align-items: center;
  position: sticky;
  top: 0;
  z-index: 1000;
  backdrop-filter: blur(12px) saturate(160%);
  box-shadow: 0 2px 8px -2px rgba(0,0,0,0.6), 0 0 0 1px rgba(255,255,255,0.04) inset;
}

.main-menu {
  list-style: none;
  display: flex;
  gap: 30px;
}
.main-menu li { position: relative; }

.main-menu a {
  color: var(--color-text);
  text-decoration: none;
  padding: 10px 15px;
  display: block;
  font-weight: 600;
  font-size: .95rem;
  letter-spacing: .3px;
  position: relative;
  transition: color var(--transition-fast);
}
.main-menu a::after {
  content: '';
  position: absolute;
  left: 15px; right: 15px; bottom: 6px; height: 2px;
  background: linear-gradient(90deg,var(--accent) 0%, var(--accent-neon) 100%);
  transform: scaleX(0);
  transform-origin: left;
  transition: transform var(--transition-fast);
  border-radius: 2px;
}
.main-menu a:hover::after, .main-menu a:focus-visible::after { transform: scaleX(1); }
.main-menu a:hover { color: #fff; }
.main-menu a:focus-visible { outline: none; box-shadow: var(--focus-ring); border-radius: var(--radius-sm); }

/* Dropdown */
.dropdown-menu {
  display: none;
  position: absolute;
  background: rgba(30,30,44,0.92);
  top: 100%;
  left: 0;
  min-width: 200px;
  list-style: none;
  border-radius: var(--radius-md);
  box-shadow: var(--shadow-md);
  padding: 8px;
  backdrop-filter: blur(10px) saturate(140%);
  border: 1px solid rgba(255,255,255,0.07);
  transform-origin: top left;
  animation: dropdownOut var(--transition-fast) forwards;
}
.dropdown:hover .dropdown-menu { display: block; animation: dropdownIn var(--transition-fast) forwards; }
@keyframes dropdownIn { from { opacity:0; transform: translateY(6px) scale(.96);} to {opacity:1; transform: translateY(0) scale(1);} }
@keyframes dropdownOut { to { opacity:0; transform: translateY(6px) scale(.96);} }

.dropdown-menu li a {
  padding: 10px 14px;
  color: var(--color-text-soft);
  border-radius: var(--radius-sm);
  font-size: .9rem;
  display: block;
  transition: background var(--transition-fast), color var(--transition-fast);
}
.dropdown-menu a:hover {
  background: linear-gradient(90deg, rgba(191,199,203,0.16), rgba(230,233,235,0.10));
  color: #000;
}

/* Sous-menu de deuxième niveau */
.dropdown-menu li { position: relative; }
.dropdown-menu .submenu { display:none; position:absolute; top:0; left:100%; min-width:220px; background: rgba(34,34,50,0.95); border:1px solid rgba(255,255,255,0.06); border-radius: var(--radius-md); padding:8px; box-shadow: var(--shadow-md); backdrop-filter: blur(10px) saturate(140%); animation: dropdownOut var(--transition-fast) forwards; }
.dropdown-menu li:hover > .submenu { display:block; animation: dropdownIn var(--transition-fast) forwards; }
.dropdown-menu .submenu a { font-size:.85rem; padding:9px 12px; }
.dropdown-menu .submenu a:hover { background: linear-gradient(90deg, rgba(191,199,203,0.14), rgba(230,233,235,0.08)); color:#000; }

/* Banner */
.banner {
  background: radial-gradient(circle at 70% 30%, #1d1d2c, #12121b 60%);
  height: 400px;
  display: flex;
  justify-content: center;
  align-items: center;
  color: var(--color-heading);
  font-size: clamp(2rem, 5vw, 2.8rem);
  font-weight: 700;
  letter-spacing: 1px;
  position: relative;
  overflow: hidden;
  border-bottom: 1px solid rgba(255,255,255,0.05);
}
.banner::after {
  content:'';
  position:absolute; inset:0;
  background: linear-gradient(120deg, transparent 0 35%, rgba(191,199,203,0.06) 50%, transparent 65% 100%);
  animation: sheen 8s linear infinite;
  pointer-events:none;
}

/* Main content */
main { max-width: 900px; margin: 40px auto; padding: 0 20px; }
section { margin-bottom: 60px; }

h2 {
  margin-bottom: 20px;
  color: var(--color-heading);
  border-bottom: 3px solid var(--accent);
  display: inline-block;
  padding-bottom: 5px;
  font-weight: 700;
  letter-spacing: .6px;
  text-shadow: 0 2px 6px rgba(191,199,203,0.14);
}

p { color: var(--color-text-soft); font-size: 1.05rem; }

/* Portfolio */
.portfolio-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: 20px;
}
.portfolio-item {
  background: linear-gradient(145deg,#222233,#1b1b28);
  border: 1px solid rgba(255,255,255,0.05);
  box-shadow: 0 4px 10px -3px rgba(0,0,0,0.65), 0 0 0 1px rgba(255,255,255,0.03) inset;
  border-radius: 12px;
  overflow: hidden;
  transition: transform var(--transition-fast), box-shadow var(--transition-fast), border-color var(--transition-fast);
  text-decoration: none;
  color: inherit;
  position: relative;
}
.portfolio-item::after {
  content:''; position:absolute; inset:0; background: linear-gradient(130deg, rgba(191,199,203,0) 0%, rgba(191,199,203,0.12) 60%, rgba(230,233,235,0.16) 100%); opacity:0; transition: opacity var(--transition-fast);
}
.portfolio-item:hover { transform: translateY(-6px) scale(1.03); box-shadow: 0 10px 28px -8px rgba(0,0,0,0.7), 0 0 0 1px rgba(191,199,203,0.12); border-color: rgba(191,199,203,0.16); }
.portfolio-item:hover::after { opacity:1; }
.portfolio-item img { width: 100%; display: block; filter: brightness(0.92) saturate(110%); transition: filter var(--transition-fast), transform var(--transition-slow); }
.portfolio-item:hover img { filter: brightness(1) saturate(130%); transform: scale(1.05); }
.portfolio-item h3 { padding: 12px 14px 16px; font-size: 1.05rem; color: var(--color-heading); letter-spacing: .3px; }

/* Articles */
.articles article, .article-flex {
  background: linear-gradient(160deg,#1c1c29,#1a1a26 40%, #202030);
  padding: 18px 22px;
  margin-bottom: 18px;
  border-radius: 14px;
  box-shadow: var(--shadow-sm);
  border: 1px solid rgba(255,255,255,0.04);
  position: relative;
  overflow: hidden;
}
.articles article::before, .article-flex::before {
  content:''; position:absolute; inset:0; background: radial-gradient(circle at 80% 10%, rgba(191,199,203,0.10), transparent 60%); opacity:0; transition: opacity var(--transition-fast); pointer-events:none;
}
.articles article:hover::before, .article-flex:hover::before { opacity:1; }
.articles h3, .article-content h3 { margin-bottom: 8px; color: var(--color-heading); font-size: 1.15rem; }
.articles a, .article-content a { color: var(--accent-neon); text-decoration: none; position: relative; }
.articles a::after, .article-content a::after { content:''; position:absolute; left:0; bottom:-2px; height:2px; width:100%; background: linear-gradient(90deg,var(--accent),var(--accent-neon)); transform: scaleX(0); transform-origin:left; transition: transform var(--transition-fast); }
.articles a:hover::after, .article-content a:hover::after { transform: scaleX(1); }
.articles a:hover, .article-content a:hover { color:#fff; }
.article-flex { display: flex; gap: 15px; align-items: flex-start; }
.article-flex img { width: 300px; height: auto; border-radius: 10px; object-fit: cover; box-shadow: 0 6px 20px -8px rgba(0,0,0,0.6); }
.article-content p { color: var(--color-text-soft); font-size: 1.05rem; margin-top: 0; }

/* Footer */
footer { background: #14141f; color: #7d7d95; text-align: center; padding: 28px 20px; font-size: .85rem; letter-spacing: .5px; border-top: 1px solid rgba(255,255,255,0.05); margin-top: 60px; }
footer a { color: var(--accent-neon); text-decoration:none; }
footer a:hover { text-decoration:underline; }

/* === GALERIE APPLE STYLE + LIGHTBOX === */
.stage-gallery-button { position: relative; width: 150px; height: 150px; cursor: pointer; margin: 26px auto 14px; display: block; user-select: none; border-radius: 20px; box-shadow: 0 8px 24px -6px rgba(0,0,0,0.65), 0 0 0 1px rgba(255,255,255,0.05) inset; overflow: hidden; background: linear-gradient(145deg,#222233,#1a1a26); transition: transform var(--transition-fast), box-shadow var(--transition-fast); }
.stage-gallery-button::after { content:''; position:absolute; inset:0; background: linear-gradient(130deg, rgba(191,199,203,0) 0%, rgba(191,199,203,0.12) 70%, rgba(230,233,235,0.18) 100%); mix-blend-mode: overlay; opacity:0; transition: opacity var(--transition-fast); }
.stage-gallery-button:hover { transform: translateY(-4px) scale(1.02); box-shadow: 0 14px 38px -10px rgba(0,0,0,0.7), 0 0 0 1px rgba(191,199,203,0.18); }
.stage-gallery-button:hover::after { opacity:1; }
.stage-gallery-button img { position: absolute; width: 90px; height: 90px; object-fit: cover; border-radius: 16px; box-shadow: 0 2px 10px rgba(0,0,0,0.45); transition: transform var(--transition-fast), filter var(--transition-fast); }
.stage-gallery-button img:nth-child(1){ top:10px; left:10px; z-index:5; transform: rotate(-10deg); }
.stage-gallery-button img:nth-child(2){ top:30px; left:40px; z-index:4; transform: rotate(5deg); }
.stage-gallery-button img:nth-child(3){ top:60px; left:20px; z-index:3; transform: rotate(-5deg); }
.stage-gallery-button img:nth-child(4){ top:40px; left:70px; z-index:2; transform: rotate(8deg); }
.stage-gallery-button img:nth-child(5){ top:80px; left:60px; z-index:1; transform: rotate(-8deg); }
.stage-gallery-button:hover img { transform: scale(1.06); filter: brightness(1.1) saturate(120%); }
.stage-gallery-title { text-align: center; margin-top: 4px; font-weight: 600; color: var(--color-heading); font-size: 1rem; letter-spacing:.4px; }

/* Disposition multiple des galeries en grille */
.stage-galleries { 
  display: grid; 
  grid-template-columns: repeat(4, 1fr); 
  gap: 32px 28px; 
  align-items: start; 
  margin-top: 50px; 
}

@media (max-width: 1100px) { .stage-galleries { grid-template-columns: repeat(3, 1fr); } }
@media (max-width: 820px)  { .stage-galleries { grid-template-columns: repeat(2, 1fr); gap: 28px 22px; } }
@media (max-width: 520px)  { .stage-galleries { grid-template-columns: 1fr; gap: 26px 0; } }

/* Lightbox */
.stage-lightbox { display: none; position: fixed; top:0; left:0; right:0; bottom:0; background: rgba(6,6,10,0.9); z-index:2000; justify-content: center; align-items: center; overflow:hidden; backdrop-filter: blur(12px) saturate(160%); }
.stage-lightbox.active { display:flex; animation: fadeIn .35s ease; }
@keyframes fadeIn { from { opacity:0;} to { opacity:1;} }
  .stage-lightbox-content { position: relative; max-width: 90vw; max-height: 80vh; background: linear-gradient(155deg,#1f1f2c,#1b1b27); border-radius: 18px; box-shadow: 0 12px 38px -12px rgba(0,0,0,0.7), 0 0 0 1px rgba(191,199,203,0.10) inset; display:flex; flex-direction:column; align-items:center; padding: 26px 26px 30px; overflow:hidden; }
.stage-lightbox-image { max-width: 100%; max-height: 60vh; border-radius: 14px; object-fit: contain; margin-bottom: 18px; box-shadow: 0 8px 30px -10px rgba(0,0,0,0.65); }
.stage-lightbox-image.lb-in { animation: lbFadeIn .45s cubic-bezier(.4,0,.2,1); }
.stage-lightbox-image.lb-out { animation: lbFadeOut .18s cubic-bezier(.4,0,.2,1); }
@keyframes lbFadeIn { from { opacity:0; transform: translateY(12px) scale(.98); } to { opacity:1; transform: translateY(0) scale(1);} }
@keyframes lbFadeOut { from { opacity:1; transform: translateY(0) scale(1);} to { opacity:0; transform: translateY(-6px) scale(.98);} }
.stage-lightbox-caption { font-size: .95rem; color: var(--color-text-soft); text-align:center; max-width: 90vw; margin-bottom: 22px; }
.stage-lightbox-controls { display:flex; gap: 18px; }
.stage-lightbox-controls button { background: var(--gradient-accent); color:#000; border:none; padding: 12px 22px; border-radius: 10px; cursor:pointer; font-weight:600; font-size:.95rem; letter-spacing:.4px; box-shadow: 0 4px 16px -4px rgba(191,199,203,0.16), 0 0 0 1px rgba(255,255,255,0.06) inset; transition: transform var(--transition-fast), box-shadow var(--transition-fast); }
.stage-lightbox-controls button:hover { transform: translateY(-3px); box-shadow: 0 8px 26px -6px rgba(191,199,203,0.22), 0 0 0 1px rgba(255,255,255,0.1) inset; }
.stage-lightbox-controls button:active { transform: translateY(-1px) scale(.97); }
.stage-lightbox-close { position:absolute; top:10px; right:15px; background: transparent; border:none; font-size: 2rem; color: var(--color-text-soft); cursor:pointer; font-weight:700; transition: color var(--transition-fast), transform var(--transition-fast); }
.stage-lightbox-close:hover { color:#fff; transform: rotate(8deg) scale(1.1); }

/* Cartes descriptives Stage (fonctions-windev) */
.fonctions-windev { padding: 24px 26px 28px; background: linear-gradient(165deg,#1d1d29,#1b1b28 55%, #242437); border-radius: 18px; box-shadow: var(--shadow-md); border: 1px solid rgba(255,255,255,0.05); position: relative; overflow:hidden; }
.fonctions-windev::before { content:''; position:absolute; inset:0; background: radial-gradient(circle at 85% 15%, rgba(191,199,203,0.10), transparent 60%); opacity:.4; pointer-events:none; }
.fonctions-windev h2 { color: var(--color-heading); margin-bottom: 15px; }
.fonctions-windev p, .fonctions-windev li { margin-bottom: 10px; line-height: 1.6; color: var(--color-text-soft); }
.fonctions-windev ul { padding-left: 18px; }
.fonctions-windev strong { color: #fff; }

/* Bouton Ajouter */
.button-ajouter { display:inline-block; padding: 12px 25px; background: var(--gradient-accent); color:#000; font-weight:600; font-size:1rem; border:none; border-radius: 10px; cursor:pointer; box-shadow: 0 6px 20px -6px rgba(191,199,203,0.20), 0 0 0 1px rgba(255,255,255,0.08) inset; transition: background var(--transition-fast), transform var(--transition-fast), box-shadow var(--transition-fast); text-align:center; text-decoration:none; user-select:none; position: relative; overflow:hidden; }
.button-ajouter::after { content:''; position:absolute; inset:0; background: linear-gradient(120deg, transparent 0 35%, rgba(255,255,255,0.3) 50%, transparent 65% 100%); opacity:0; transition: opacity .5s; }
.button-ajouter:hover::after { opacity:1; }
.button-ajouter:hover { transform: translateY(-4px); box-shadow: 0 12px 32px -10px rgba(191,199,203,0.28), 0 0 0 1px rgba(255,255,255,0.15) inset; }
.button-ajouter:active { transform: translateY(-1px) scale(.97); box-shadow: 0 6px 18px -6px rgba(191,199,203,0.22), 0 0 0 1px rgba(255,255,255,0.12) inset; }
.button-ajouter:focus-visible { outline:none; box-shadow: var(--focus-ring); }

/* Effet tilt interactif (3D subtil) */
.tiltable { transform-style: preserve-3d; will-change: transform; transition: transform .4s cubic-bezier(.22,.61,.36,1), box-shadow .4s; }
.tiltable[data-tilt-active="true"] { transition: none; }
.tilt-glow { position:absolute; inset:0; pointer-events:none; opacity:0; mix-blend-mode:overlay; background: radial-gradient(circle at center, rgba(191,199,203,0.14), transparent 70%); transition: opacity .5s; border-radius: inherit; }
.tiltable:hover .tilt-glow { opacity:.9; }

/* Barre de progression scroll */
.scroll-progress { position:fixed; top:0; left:0; height:4px; width:100%; transform-origin:left; transform: scaleX(0); background: linear-gradient(90deg,var(--accent),var(--accent-neon)); z-index:3000; box-shadow:0 0 6px 2px rgba(191,199,203,0.14); transition: transform .15s linear; }

/* Transition page */
body.page-fade-in { animation: pageFadeIn .5s ease; }
body.page-fade-out { animation: pageFadeOut .25s ease forwards; }
@keyframes pageFadeIn { from { opacity:0; transform: translateY(10px); } to { opacity:1; transform: translateY(0);} }
@keyframes pageFadeOut { to { opacity:0; transform: translateY(6px); } }

/* Accessibilité focus générique */
a:focus-visible, button:focus-visible { outline:none; box-shadow: var(--focus-ring); border-radius: 8px; }

/* Responsive */
@media (max-width: 760px) {
  .main-menu { gap: 16px; }
  .main-menu a { padding: 8px 10px; font-size: .85rem; }
  .article-flex { flex-direction: column; }
  .article-flex img { width: 100%; }
  .stage-gallery-button { width: 130px; height:130px; }
  .banner { height: 300px; font-size: 2.2rem; }
  main { margin: 30px auto; }
}

@media (max-width: 480px) {
  .banner { height: 240px; }
  h2 { font-size: 1.3rem; }
  .portfolio-grid { gap: 16px; }
}

/* Préférence thème clair possible (option future) */
@media (prefers-color-scheme: light) {
  body.light-auto { background: #f7f7fc; color:#222; }
}

/* Helper utilitaire (optionnel) */
.visually-hidden { position:absolute !important; width:1px !important; height:1px !important; padding:0 !important; margin:-1px !important; overflow:hidden !important; clip:rect(0 0 0 0) !important; white-space:nowrap !important; border:0 !important; }

/* ===================== ANIMATIONS DYNAMIQUES ADDITIONNELLES ===================== */
.reveal-on-scroll { opacity:0; transform: translateY(35px) scale(.98); transition: opacity .8s var(--transition-fast), transform .9s var(--transition-fast); }
.reveal-on-scroll.is-visible { opacity:1; transform: translateY(0) scale(1); }

[data-count] { position:relative; font-variant-numeric: tabular-nums; }
  [data-count].count-animated { background: linear-gradient(90deg,var(--accent),var(--accent-neon)); -webkit-background-clip:text; background-clip:text; color:transparent; filter: drop-shadow(0 0 8px rgba(191,199,203,0.14)); }

.parallax-bg { position: relative; will-change: transform; transition: transform .15s linear; }

.heading-wave { position: relative; display:inline-block; }
.heading-wave::after { content:''; position:absolute; left:0; bottom:-4px; height:3px; width:100%; background: linear-gradient(90deg,var(--accent),var(--accent-neon)); transform-origin:left; transform: scaleX(.15); opacity:.45; transition: transform .5s cubic-bezier(.65,.05,.36,1), opacity .5s; border-radius:3px; }
.heading-wave:hover::after { transform: scaleX(1); opacity:1; }

/* Animation gradient pulsée sur hover intensif */
.pulse-gradient:hover { animation: pulseGradient 3.5s ease-in-out infinite; }
@keyframes pulseGradient { 0%,100% { filter: brightness(1); } 50% { filter: brightness(1.25) saturate(1.25); } }

/* Pré-charge légère pour éviter layout shift */
html.is-anim-init body { visibility: visible; }

